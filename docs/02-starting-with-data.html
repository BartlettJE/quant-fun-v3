<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Materials for the MSc Conversion Research Methods 1 and 2 courses at the University of Glasgow School of Psychology &amp; Neuroscience.">
<title>Fundamentals of Quantitative Analysis - 2&nbsp; Creating Reproducible Documents</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-intro-data-viz.html" rel="next">
<link href="./01-programming-basics.html" rel="prev">
<link href="./images/logos/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
<link rel="stylesheet" href="include/booktem.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/glossary.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-starting-with-data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fundamentals of Quantitative Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/BartlettJE/quant-fun-v3/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-foreword.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-programming-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to programming with R/R Studio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-starting-with-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-intro-data-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-wrangling-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data wrangling 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-wrangling-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data wrangling 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-wrangling-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Wrangling 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-more-visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Building your data visualisation skills</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-lm-continuous.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regression with one continuous predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-lm-categorical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regression with one categorical predictor</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-power.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Statistical Power</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-screening-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Screening Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">One-way ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-factorial-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Factorial ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Multiple Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-dissertation-prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Dissertation Preparation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-analysis-journeys.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis Journeys</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-analysis-journey-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Analysis Journey 1: Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-analysis-journey-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Analysis Journey 2: Simple Linear Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-analysis-journey-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Analysis Journey 3: ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-analysis-journey-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Analysis Journey 4: Multiple Linear Regression.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a-installing-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a1-updating-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Updating packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a2-additional-learning-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Additional Resources</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a3-How-to-cite-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Citing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-b-symbols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-d-probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-y-license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#file-structure-working-directories-and-r-projects" id="toc-file-structure-working-directories-and-r-projects" class="nav-link active" data-scroll-target="#file-structure-working-directories-and-r-projects"><span class="header-section-number">2.1</span> File structure, working directories, and R Projects</a>
  <ul class="collapse">
<li><a href="#intro-a1" id="toc-intro-a1" class="nav-link" data-scroll-target="#intro-a1"><span class="header-section-number">2.1.1</span> Activity 1: Create a folder for all your work</a></li>
  <li><a href="#intro-a2" id="toc-intro-a2" class="nav-link" data-scroll-target="#intro-a2"><span class="header-section-number">2.1.2</span> Manually setting the working directory</a></li>
  <li><a href="#activity-2---creating-an-r-project" id="toc-activity-2---creating-an-r-project" class="nav-link" data-scroll-target="#activity-2---creating-an-r-project"><span class="header-section-number">2.1.3</span> Activity 2 - Creating an R Project</a></li>
  </ul>
</li>
  <li>
<a href="#creating-and-navigating-r-markdown-documents" id="toc-creating-and-navigating-r-markdown-documents" class="nav-link" data-scroll-target="#creating-and-navigating-r-markdown-documents"><span class="header-section-number">2.2</span> Creating and navigating R Markdown documents</a>
  <ul class="collapse">
<li><a href="#intro-a3" id="toc-intro-a3" class="nav-link" data-scroll-target="#intro-a3"><span class="header-section-number">2.2.1</span> Activity 3: Open, save, and knit a new R Markdown document</a></li>
  <li><a href="#intro-a4" id="toc-intro-a4" class="nav-link" data-scroll-target="#intro-a4"><span class="header-section-number">2.2.2</span> Activity 4: Create a new code chunk</a></li>
  <li><a href="#intro-a5" id="toc-intro-a5" class="nav-link" data-scroll-target="#intro-a5"><span class="header-section-number">2.2.3</span> Activity 5: Write some code</a></li>
  <li><a href="#intro-a6" id="toc-intro-a6" class="nav-link" data-scroll-target="#intro-a6"><span class="header-section-number">2.2.4</span> Activity 6: Run your code</a></li>
  <li><a href="#intro-a7" id="toc-intro-a7" class="nav-link" data-scroll-target="#intro-a7"><span class="header-section-number">2.2.5</span> Activity 7: Inline code</a></li>
  <li><a href="#intro-a8" id="toc-intro-a8" class="nav-link" data-scroll-target="#intro-a8"><span class="header-section-number">2.2.6</span> Activity 8: Knitting your file</a></li>
  </ul>
</li>
  <li><a href="#demonstrating-reproducibility" id="toc-demonstrating-reproducibility" class="nav-link" data-scroll-target="#demonstrating-reproducibility"><span class="header-section-number">2.3</span> Demonstrating reproducibility</a></li>
  <li><a href="#finished" id="toc-finished" class="nav-link" data-scroll-target="#finished"><span class="header-section-number">2.4</span> Finished</a></li>
  <li><a href="#test-yourself" id="toc-test-yourself" class="nav-link" data-scroll-target="#test-yourself"><span class="header-section-number">2.5</span> Test Yourself</a></li>
  <li>
<a href="#getting-ready-to-work-with-data" id="toc-getting-ready-to-work-with-data" class="nav-link" data-scroll-target="#getting-ready-to-work-with-data"><span class="header-section-number">2.6</span> Getting ready to work with data</a>
  <ul class="collapse">
<li><a href="#ld-a1" id="toc-ld-a1" class="nav-link" data-scroll-target="#ld-a1"><span class="header-section-number">2.6.1</span> Activity 1: Set-up the data, working directory and Rmd file</a></li>
  <li><a href="#ld-a2" id="toc-ld-a2" class="nav-link" data-scroll-target="#ld-a2"><span class="header-section-number">2.6.2</span> Activity 2: Loading a package to our library</a></li>
  </ul>
</li>
  <li>
<a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data"><span class="header-section-number">2.7</span> The data</a>
  <ul class="collapse">
<li><a href="#ld-a3" id="toc-ld-a3" class="nav-link" data-scroll-target="#ld-a3"><span class="header-section-number">2.7.1</span> Activity 3: Read in data</a></li>
  </ul>
</li>
  <li>
<a href="#looking-at-data" id="toc-looking-at-data" class="nav-link" data-scroll-target="#looking-at-data"><span class="header-section-number">2.8</span> Looking at Data</a>
  <ul class="collapse">
<li><a href="#ld-a4" id="toc-ld-a4" class="nav-link" data-scroll-target="#ld-a4"><span class="header-section-number">2.8.1</span> Activity 4: Look at your data</a></li>
  </ul>
</li>
  <li>
<a href="#joining-data" id="toc-joining-data" class="nav-link" data-scroll-target="#joining-data"><span class="header-section-number">2.9</span> Joining Data</a>
  <ul class="collapse">
<li><a href="#ld-a5" id="toc-ld-a5" class="nav-link" data-scroll-target="#ld-a5"><span class="header-section-number">2.9.1</span> Activity 5: Join the files together</a></li>
  </ul>
</li>
  <li>
<a href="#selecting-data" id="toc-selecting-data" class="nav-link" data-scroll-target="#selecting-data"><span class="header-section-number">2.10</span> Selecting Data</a>
  <ul class="collapse">
<li><a href="#ld-a6" id="toc-ld-a6" class="nav-link" data-scroll-target="#ld-a6"><span class="header-section-number">2.10.1</span> Activity 6: Pull out variables of interest</a></li>
  </ul>
</li>
  <li>
<a href="#knitting-our-reproducible-code" id="toc-knitting-our-reproducible-code" class="nav-link" data-scroll-target="#knitting-our-reproducible-code"><span class="header-section-number">2.11</span> Knitting our Reproducible code</a>
  <ul class="collapse">
<li><a href="#ld-debug" id="toc-ld-debug" class="nav-link" data-scroll-target="#ld-debug"><span class="header-section-number">2.11.1</span> Debugging tips</a></li>
  </ul>
</li>
  <li><a href="#code-layout" id="toc-code-layout" class="nav-link" data-scroll-target="#code-layout"><span class="header-section-number">2.12</span> Code Layout</a></li>
  <li><a href="#ld-fin" id="toc-ld-fin" class="nav-link" data-scroll-target="#ld-fin"><span class="header-section-number">2.13</span> Finished!</a></li>
  <li>
<a href="#ld-test" id="toc-ld-test" class="nav-link" data-scroll-target="#ld-test"><span class="header-section-number">2.14</span> Test yourself</a>
  <ul class="collapse">
<li><a href="#knowledge-questions" id="toc-knowledge-questions" class="nav-link" data-scroll-target="#knowledge-questions"><span class="header-section-number">2.14.1</span> Knowledge Questions</a></li>
  <li><a href="#ld-debugex" id="toc-ld-debugex" class="nav-link" data-scroll-target="#ld-debugex"><span class="header-section-number">2.14.2</span> Debugging exercises</a></li>
  </ul>
</li>
  <li><a href="#words-from-this-chapter" id="toc-words-from-this-chapter" class="nav-link" data-scroll-target="#words-from-this-chapter"><span class="header-section-number">2.15</span> Words from this Chapter</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/BartlettJE/quant-fun-v3/edit/main/02-starting-with-data.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/BartlettJE/quant-fun-v3/blob/main/02-starting-with-data.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="C02-repro-docs" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Reproducible Documents</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>In this chapter, we introduce you to using code to create <strong><a href="https://psyteachr.github.io/glossary/r#reproducible-research" target="_blank" class="glossary" title="Research that documents all of the steps between raw data and results in a way that can be verified.">reproducible research</a></strong>. Creating reproducible research means you will write text and code that completely and transparently performs an analysis from start to finish in a way that produces the same result for different people using the same software on different computers. We will cover things such as file structure and setting a working directory, using <strong><a href="https://psyteachr.github.io/glossary/r#r-markdown" target="_blank" class="glossary" title="The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.">R Markdown</a></strong> files, and writing code chunks.</p>
<p>As well as improving transparency with others researchers, reproducible research benefits <strong>you</strong>. When you return to an analysis or task after days, weeks, or months, you will thank past you for doing things in a transparent, reproducible way, as you can easily pick up right where you left off.</p>
<p>As part of your skill development, it is important that you work with data so that you can become confident and competent in your management and analysis of data. Starting in this chapter, we introduce you to creating reproducible documents alongside developing your data skills.</p>
<p><strong>Chapter Intended Learning Outcomes (ILOs)</strong></p>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li>ILO1.</li>
</ul>
<section id="file-structure-working-directories-and-r-projects" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="file-structure-working-directories-and-r-projects">
<span class="header-section-number">2.1</span> File structure, working directories, and R Projects</h2>
<p>In chapter 1, we never worked with files, so you never had to worry about where you put things on your computer. Before we can start working with R Markdown files, we must explain what a <strong><a class="glossary" title="The filepath where R is currently loading files from and saving files to.">working directory</a></strong> is and how your computer knows where to find things. Your working directory is the folder where your computer starts to look for files. It would be able to access files from within that folder and within sub-folders in your working directory, but it would not be able to access folders outside your working directory.</p>
<p>In this course, we are going to prescribe a way of working to support an organised file system, helping you to know where everything is and where R will try to save things on your computer and where it will try to save and load things. Once you become more comfortable working with files, you can work in a different way that makes sense to you, but we recommend following our instructions for at least the first course - RM1.</p>
<section id="intro-a1" class="level3" data-number="2.1.1"><h3 data-number="2.1.1" class="anchored" data-anchor-id="intro-a1">
<span class="header-section-number">2.1.1</span> Activity 1: Create a folder for all your work</h3>
<p>In your documents or OneDrive, create a new folder called <code>ResearchMethods1_2</code>. This will be your highest level folder where you will save everything for Research Methods 1 and 2.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Top tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you are a student at the University of Glasgow, you have access to the full Microsoft suite of software. One of those is the cloud-based storage system OneDrive. We heavily recommend using this to save all your work in as it backs up your work online and you can access it from multiple devices.</p>
</div>
</div>
<p>Within that folder, create two new folders called <code>Assessments</code> and <code>Quant_Fundamentals</code>. In <code>Assessments</code>, you can save all your assessments for RM1 and RM2 as you come to them. In <code>Quant_Fundamentals</code>, that is where you will save all your work as you progress through this book.</p>
<p>Within <code>Quant_Fundamentals</code>, create a new folder called <code>Chapter_02_reproducible_docs</code>. As you work through the book, you will create a new chapter folder each time you start a new chapter and the sub-folders will always be the same. Within <code>Chapter_02_reproducible_docs</code>, create two new folders called <code>data</code> and <code>figures</code>. As a diagram, it should look like <a href="#fig-img-file-structure">Figure&nbsp;<span>2.1</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-file-structure" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/file-structure.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: Prescribed file structure for RM 1 and RM 2.</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Top tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You might notice in the folder names we avoided using spaces by adding things like underscores _ or capitalising different words. Historically, spaces in folder/file names could cause problems for code, but now its just slightly easier when file names and folder names do not have spaces in them.</p>
<p>For naming files and folders, try and choose something sensible so you know what it refers to. You are trying to balance being as short as possible, while still being immediately identifiable. For example, instead of fundamentals of quantitative analysis, we called it <code>Quant_Fundamentals</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you create and name folders to use with R / RStudio, Whatever you do, do not call the folder “R”. If you do this, sometimes R has an identity crisis and will not save or load your files properly. It can also really damage your setup of R and lead you to having to reinstall everything. The reason calling your folder “R” can be a problem is R tends to save all the packages in a folder called R. If there is another folder called R, then it gets confused and stops working properly.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
File management when using the online server
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If we support you to use the online University of Glasgow <strong>R Server</strong>, working with files is a little different. If you downloaded R / R Studio to your own computer or you are using one of the computers, please ignore this section.</p>
<p>The main disadvantage to using the R server is that you will need create folders on the server and then upload and download any files you are working on to and from the server. Please be aware that <strong>there is no link between your computer and the R server</strong>. If you change files on the server, they will not appear on your computer until you download them from the server, and you need to be very careful when you submit your assessment files that you are submitting the right file. This is the main reason we recommend installing R / RStudio on your computer wherever possible.</p>
<p>Going forward throughout this book, if you are using the server, you will need to follow an extra step where you also upload them to the sever. As an example:</p>
<ol type="1">
<li><p>Log on to the <strong>R server</strong> using the link we provided to you.</p></li>
<li><p>In the file pane, click <code>New folder</code> and create the same structure we demonstrated above.</p></li>
<li><p>Download <a href="data/ahi-cesd.csv" download=""><code>ahi-cesd.csv</code></a> and <a href="data/participant-info.csv"><code>participant-info.csv</code></a> into the <code>data</code> folder you created for chapter 2. To download a file from this book, right click the link and select “save link as”. Make sure that both files are saved as “.csv”. Do not open them on your machine as often other software like Excel can change setting and ruin the files.</p></li>
<li><p>Now that the files are stored on your computer, go to RStudio on the server and click <code>Upload</code> then <code>Browse</code> and choose the folder for the chapter you are working on.</p></li>
<li><p>Click <code>Choose file</code> and go and find the data you want to upload.</p></li>
</ol>
</div>
</div>
</div>
</section><section id="intro-a2" class="level3" data-number="2.1.2"><h3 data-number="2.1.2" class="anchored" data-anchor-id="intro-a2">
<span class="header-section-number">2.1.2</span> Manually setting the working directory</h3>
<p>Now that you have a folder structure that will keep everything nice and organised, we will demonstrate how you can manually <strong>set the working directory</strong>. If you open R Studio, you can check where the current working directory is by typing the function <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> into the console and pressing enter/return. That will show you the current file path R is using to navigate files. If you look at the Files window in the bottom right, this will also show you the files and folders available from your working directory.</p>
<p>If you click on the top menu <strong><code>Session &gt;&gt; Set Working Directory &gt;&gt; Choose Directory...</code></strong>, (<a href="#fig-img-working-dir">Figure&nbsp;<span>2.2</span></a>) you can navigate through your documents or OneDrive until you can select <code>Chapter_02_reproducible_docs</code>. Click open and that will set the folder as your working directory. You can double check this worked by running <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> again in the console.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-working-dir" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/working-dir.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.2: Manually setting the working directory.</figcaption></figure>
</div>
</div>
</div>
</section><section id="activity-2---creating-an-r-project" class="level3" data-number="2.1.3"><h3 data-number="2.1.3" class="anchored" data-anchor-id="activity-2---creating-an-r-project">
<span class="header-section-number">2.1.3</span> Activity 2 - Creating an R Project</h3>
<p>Knowing how to check and manually set your working directory is useful, but there is a more efficient way of setting your working directory alongside organised file management. You are going to create something called an <strong><a class="glossary" title="A project is simply a working directory designated with a .RProj file. When you open an R project, it automatically sets the working directory to the folder the project is located in.">R Project</a></strong>.</p>
<p>To create a new project for the work you will do in this chapter (<a href="#fig-new-proj">Figure&nbsp;<span>2.3</span></a>):</p>
<ol type="1">
<li><p>Click on the top menu and navigate to <code>File &gt;&gt; New Project...</code>.</p></li>
<li><p>You have the option to select from New Directory, Existing Directory, or Version Control. You already created a folder for <code>Chapter_02_reproducible_docs</code>, so select Existing Directory.</p></li>
<li><p>Click Browse… next to Project working directory to select the folder you want to create the project in.</p></li>
<li><p>When you have navigated to <code>Chapter_02_reproducible_docs</code> for this chapter, click Open and then Create Project.</p></li>
</ol>
<div id="fig-new-proj" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/project-pageone.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/project-pagetwo.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.3: Starting a new project.</figcaption><p></p>
</figure>
</div>
<p>RStudio will restart itself and open with this new project directory as the working directory. You should see something like <a href="#fig-img-project-screen">Figure&nbsp;<span>2.4</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-project-screen" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/new_project.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.4: RStudio screen in a new project in your chapter 2 folder.</figcaption></figure>
</div>
</div>
</div>
<p>In the files tab in the bottom right window, you will see all the contents in your project directory. You can see your two sub-folders for data and figures and a file called <code>Chapter_02_reproducible_docs.Rproj</code>. This is a file that contains all of the project information. When you come back to this project after closing down RStudio, if you double click on the .Rproj file, it will open up your project and have your working directory all set up and ready to go.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>In each chapter, we will repeat these instructions at the start to prescribe this file structure, but when you create your own folders and projects, do not ever save a new project <strong>inside</strong> another project. This can cause some hard-to-resolve problems. For example, it would be fine to create a new project within the <code>Quant_Fundamentals</code> folder as we will do for each new chapter, but should never create a new project within the <code>Chapter_02_reproducible_docs</code> folder.</p>
</div>
</div>
</section></section><section id="creating-and-navigating-r-markdown-documents" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="creating-and-navigating-r-markdown-documents">
<span class="header-section-number">2.2</span> Creating and navigating R Markdown documents</h2>
<p>Now you know how to navigate files and folders on your computer, we can start working with R Markdown files.</p>
<p>Throughout this data skills book and related assignments, you will use a worksheet format called R Markdown (abbreviated as .Rmd) which is a great way to create dynamic documents combining regular text and embedded code chunks.</p>
<p>R Markdown documents are self-contained and fully reproducible, meaning if you have the necessary data, you should be able to run someone else’s analyses. This is an important part of your open science training as one of the reasons we teach data skills this way is that it enables us to share open and reproducible information.</p>
<p>Using these worksheets enables you to keep a record of all the code you write as you progress through this book, for data skills assessments we can give you a task to add required code, and in your research reports you can independently process, visualise, and analyse your data all from one file.</p>
<p>For more information about R Markdown, feel free to have a look at their main webpage <a href="http://rmarkdown.rstudio.com" target="_blank">http://rmarkdown.rstudio.com</a>, but for now the key advantage to know about is that it allows you to write code into a document, along with regular text, and then <strong><a href="https://psyteachr.github.io/glossary/k#knit" target="_blank" class="glossary" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document">knit</a></strong> it to create your document as either a webpage (<strong><a href="https://psyteachr.github.io/glossary/h#html" target="_blank" class="glossary" title="Hyper-Text Markup Language: A system for semantically tagging structure and information on web pages.">html</a></strong>), a PDF, or Word document (.docx).</p>
<section id="intro-a3" class="level3" data-number="2.2.1"><h3 data-number="2.2.1" class="anchored" data-anchor-id="intro-a3">
<span class="header-section-number">2.2.1</span> Activity 3: Open, save, and knit a new R Markdown document</h3>
<p>Open a new R Markdown document by clicking the ‘new item’ icon and then click ‘R Markdown’ like <a href="#fig-img-new-markdown">Figure&nbsp;<span>2.5</span></a>.</p>
<div id="fig-img-new-markdown" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/Create_Rmd_menu.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/Create_Rmd_options.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.5: Creating a new R Markdown document from the menu (left) and setting title, author, date, and output (right).</figcaption><p></p>
</figure>
</div>
<p>After selecting R Markdown, there are different format options you can explore in time, but Select Document and there are four boxes to complete:</p>
<ul>
<li><p>Title: This is the title for the document which will appear at the top of the page. For this chapter, enter <code>02 Creating Reproducible Documents</code>.</p></li>
<li><p>Author: This is where you can add your name or names for multiple people. For this chapter, enter your GUID as this will be good practice for the data skills assignments.</p></li>
<li><p>Date: By default, it adds today’s date, so it will update every time you knit the document. Leave the default so you know when you completed the chapter, but if you untick, you can manually enter a static date.</p></li>
<li><p>Default Output Format: You have the option to select from html, PDF, and Word. We will demonstrate how to change output format later, so keep html for now as its the most flexible format.</p></li>
</ul>
<p>Once you click <strong>OK</strong>, this will open a new R Markdown document.</p>
<p>Save this R Markdown document by clicking <strong><code>File &gt;&gt; Save as</code></strong> from the top menu, and name this file “02_reproducible_docs”. Note the document title and file name are separate, so you still have to name the file when you save it.</p>
<p>If you have set the working directory correctly, you should now see this file appear in your file window in the bottom right hand corner like <a href="#fig-img-file-dir">Figure&nbsp;<span>2.6</span></a>, alongside your .Rproj file and two folders. .</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-file-dir" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Files_newRmd.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.6: New .Rmd file in your working directory.</figcaption></figure>
</div>
</div>
</div>
<p>Now you have the default version of the R Markdown file, you have a bunch of text and code to show its capabilities (<a href="#fig-img-markdown-default">Figure&nbsp;<span>2.7</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-markdown-default" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Default_Rmd.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.7: Default text and code in a new R Markdown document.</figcaption></figure>
</div>
</div>
</div>
<p>We will demonstrate what it looks like to <strong><a href="https://psyteachr.github.io/glossary/k#knit" target="_blank" class="glossary" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document">knit</a></strong> a document. This means that we are going to compile (i.e.&nbsp;turn) our code into a document that is more presentable. This way, you can check it knits and there are no errors. So, as we add changes in the following activities, you can identify if and when any errors appear and fix them quicker.</p>
<p>At the top of your R Markdown window, you should see a Knit button next to a little ball of yarn (<a href="#fig-img-knit-document">Figure&nbsp;<span>2.8</span></a>). If you click that, the document will knit and produce a html file.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-knit-document" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/knit_document.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.8: Clicking the knit button on a .Rmd document.</figcaption></figure>
</div>
</div>
</div>
<p>You will see a small version of the knitted document appear in the Viewer tab in the bottom right of your screen. You will also see it has created a new file in your working directory. It will have the same name as your R Markdown file, but with .html as the file ending. You can view the knitted document by clicking the “Show in new window” button or opening the file from your folder (<a href="#fig-img-knitted-default">Figure&nbsp;<span>2.9</span></a>). This should open the document in your default internet browser as websites are created in html.</p>
<div id="fig-img-knitted-default" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/Knitted_default_files.png" class="img-fluid figure-img"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="images/Knitted_default_browser.png" class="img-fluid figure-img"></p>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.9: On the left, you can see a small version of the knitted document in the Viewer tab. On the right, you can see the full version open in your internet browser.</figcaption><p></p>
</figure>
</div>
<p>Now everything is working and knitting, we can start editing the R Markdown file to add new content.</p>
</section><section id="intro-a4" class="level3" data-number="2.2.2"><h3 data-number="2.2.2" class="anchored" data-anchor-id="intro-a4">
<span class="header-section-number">2.2.2</span> Activity 4: Create a new code chunk</h3>
<p>Let’s start using your new R Markdown document to combine code and text. Follow these steps:</p>
<ol type="1">
<li><p>Delete <strong>everything</strong> below line 10.</p></li>
<li><p>On line 12, type “## About me”.</p></li>
<li><p>With your cursor on line 14, insert a blank code chunk by clicking on the top menu <strong><code>Code &gt;&gt; Insert Chunk</code></strong> or using the shortcut at the top of the R Markdown window that looks like a small green c and select R.</p></li>
</ol>
<p>Your document should now look something like <a href="#fig-img-new-chunk">Figure&nbsp;<span>2.10</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-new-chunk" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Rmd_blank_insert_chunk.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.10: Creating a new R chunk in your blank R Markdown document</figcaption></figure>
</div>
</div>
</div>
<p>What you have created is called a <strong><a href="https://psyteachr.github.io/glossary/c#chunk" target="_blank" class="glossary" title="A section of code in an R Markdown file">code chunk</a></strong>. R Markdown assumes anything written outside of a code chunk is just normal text, just like you would have in a text editor like Word. It assumes anything written inside the code chunk is R code. This makes it easy to combine both text and code in one document.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error mode
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you create a new code chunk you should notice that the grey box starts and ends with three back ticks (<code>```</code>), followed by the {r}, and then it ends with three back ticks again. This is the structure that creates a code chunk. You could actually just type this structure instead of using the <code>Insert</code> approach but we are introducing you to some shortcuts</p>
<p>One common mistake is to accidentally delete or more of these back ticks. A useful thing to notice is that code chunks tend to have a different color background - in the default appearance of RStudio a code chunk is grey and the normal text is white. You can use this to look for mistakes. If the colour of certain parts of your Markdown does not look right, check that you have not deleted the backticks.</p>
<p>Remember it is backticks (i.e.&nbsp;this `) and not single quotes (i.e.&nbsp;not this ’).</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Markdown language
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you typed “## About me”, you might notice the two hashes. You will see the effect of this shortly, but this is using Markdown language to add document formatting. Markdown is a type of formatting language, so instead of using buttons to add features like you would in Word, you add symbols which will produce different features when you knit the document.</p>
<p>The hashes create headers. One (#) creates a first level header (larger text), two (##) creates a second level header, and so on. Make sure there is a space between the text and hash or it will not knit properly.</p>
<p>As we progress through the book, we will slowly introduce you to different Markdown features, but you can see the <a href="https://rmarkdown.rstudio.com/lesson-8.html" target="_blank">RStudio Markdown Basics page</a> if you are interested.</p>
</div>
</div>
</section><section id="intro-a5" class="level3" data-number="2.2.3"><h3 data-number="2.2.3" class="anchored" data-anchor-id="intro-a5">
<span class="header-section-number">2.2.3</span> Activity 5: Write some code</h3>
<p>Now we are going to use the code examples you read about in Chapter 1 - <a href="01-programming-basics.html">Introduction to programming with R/R Studio</a> - to add some code to our R Markdown document.</p>
<p>In your code chunk, write the code below but replace the values of name/age/birthday with your own details). Remember that the four lines of code should all be inside the code chunk.</p>
<p><strong>Note:</strong> Text and dates need to be contained in quotation marks, e.g.&nbsp;“my name”. Numerical values are written without quotation marks, e.g.&nbsp;45.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>name <span class="ot">&lt;-</span> <span class="st">"James"</span> </span>
<span id="cb1-2"><a href="#cb1-2"></a>age <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb1-4"><a href="#cb1-4"></a>next_birthday <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2025-02-18"</span>) <span class="co"># Year, month, day format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error mode
</div>
</div>
<div class="callout-body-container callout-body">
<p>Missing and/or unnecessary quotation marks are a common cause of code not working. For example, if you try and type <code>name &lt;- James</code>, R will try and look for an object called <code>James</code> and throw an error since there is not an object called that. When you add</p>
</div>
</div>
</section><section id="intro-a6" class="level3" data-number="2.2.4"><h3 data-number="2.2.4" class="anchored" data-anchor-id="intro-a6">
<span class="header-section-number">2.2.4</span> Activity 6: Run your code</h3>
<p>We now have code in our code chunk and now we are going to <strong>run</strong> the code. Running the code just means making it do what you told it, such as creating objects or using functions. Remember you need the write the code first, then tell RStudio to run the code.</p>
<p>When you are working in an R Markdown document, there are several ways to run your lines of code.</p>
<ol type="1">
<li>One option is you can highlight the code you want to run and then click <strong><code>Run &gt;&gt; Run Selected Line(s)</code></strong>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/run1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Slow method of running code</figcaption></figure>
</div>
</div>
</div>
<p>2.You can press the green “play” button at the top-right of the code chunk and this will run <strong>all</strong> lines of code in that chunk.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/run2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Slightly faster method of running code that runs all lines within the code chunk!</figcaption></figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>There are keyboard shortcuts to run code which will be the fastest as you learn and use RStudio more frequently. For example, to run a single line of code, make sure that the cursor is in the line of code (it can be anywhere on the line) you want to run and press <code>ctrl + enter</code> or <code>command + return</code> on a Mac.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Keyboard shortcuts
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are loads of keyboard shortcuts, but you might only use a handful to speed up your day-to-day tasks. For a full list, look in the top menu <code>Help &gt;&gt; Keyboard shortcuts help</code>.</p>
</div>
</div>
<p>Now run your code using one of the methods above. You should see the variables <code>name</code>, <code>age</code>, <code>today</code>, and <code>next_birthday</code> appear in the environment pane in the top right corner.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try this
</div>
</div>
<div class="callout-body-container callout-body">
<p>Clear out the <a href="01-programming-basics.html#look-env">environment using the broom handle approach</a> we saw in Chapter 1 and try a different method to see which works best for you.</p>
</div>
</div>
</section><section id="intro-a7" class="level3" data-number="2.2.5"><h3 data-number="2.2.5" class="anchored" data-anchor-id="intro-a7">
<span class="header-section-number">2.2.5</span> Activity 7: Inline code</h3>
<p>Your code works and you now know how to run it, but one of the incredible benefits we said about R Markdown is that you can mix text and code. Even better is that you can combined code into a sentence to put specific outputs of your code, like a value, using what is called <strong><a class="glossary" title="Directly inserting the result of code into the text of a .Rmd file.">inline code</a></strong>.</p>
<p>Think about a time you have had to copy and paste a value or text from one file into another and you will know how easy it can be to make mistakes. Inline code avoids this. It is easier to show you what inline code does rather than to explain it so let’s have a go.</p>
<p>First, copy and paste this text exactly (do not change <em>anything</em>) to underneath and outside your code chunk - this will be the white section around line 17/18 under the grey code chunk if you are using default views.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>My name is <span class="st">`</span><span class="at">r name</span><span class="st">`</span> and I am <span class="st">`</span><span class="at">r age</span><span class="st">`</span> years old. </span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>It is <span class="st">`</span><span class="at">r next_birthday - today</span><span class="st">`</span> days until my birthday.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Your .Rmd should look like <a href="#fig-img-aboutme-rmd">Figure&nbsp;<span>2.11</span></a> but nothing will happen yet. Unlike code chunks, you cannot use run inline code. You need to knit your document for it to do it’s magic.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-img-aboutme-rmd" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/Rmd_about_me.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2.11: Complete .Rmd file with your about me section and inline code.</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How does inline code work?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Inline code has the form <code>r object</code> or <code>r function</code> inside backticks. We are using the first version where we are referencing an object we already saved. This is normally a good idea if you have a long function to run as its easier to spot mistakes in a code chunk.</p>
<p>You will see it has the form of a backtick (<code>`</code>), <code>r</code> and a space, the object you want to reference, and a final backtick. When the R Markdown file knits, it sees the <code>r</code> and recognises it as inline code and uses the object or function.</p>
<p>If you just write the two backticks without the <code>r</code>, it will just add code formatting and not produce inline code.</p>
</div>
</div>
</div>
</section><section id="intro-a8" class="level3" data-number="2.2.6"><h3 data-number="2.2.6" class="anchored" data-anchor-id="intro-a8">
<span class="header-section-number">2.2.6</span> Activity 8: Knitting your file</h3>
<p>As our final step in this part, we are going to knit our file again to see how it looks now. So, click the Knit button to regenerate your knitted .html version.</p>
<p>If you look at the knitted .html document in the Viewer tab or in your browser, you should see the sentence we copied in from Activity 7. As if by magic, that slightly odd bit of text you copied and pasted now appears as a normal sentence with the values pulled in from the objects you created.</p>
<p><strong>My name is James and I am 30 years old. <br><br>It is 214 days until my birthday.</strong></p>
<p>R Markdown is an incredibly powerful and flexible format, we wrote this whole book using it! There are a few final things to note about knitting that will be useful going forward for your data skills learning and assessments:</p>
<ul>
<li><p>R Markdown will only knit if your code works. If you have an error, it will stop and tell you to fix the error before you can click knit and try again. This is a good way of checking whether you have written functioning code in your assessments.</p></li>
<li><p>When you knit an R Markdown document, it runs the code from the start of the document to the end in order, and in a fresh session. This means it cannot access your environment, just the objects you create within that R Markdown. One common error can be writing and running code as you work on the document, but the code chunks are in the wrong order, or you created an object in the console. This means R Markdown would not know the object exists yet, or it does not have access to it at all.</p></li>
<li><p>You can choose to knit to a Word document rather than HTML. This can be useful for sharing with others or adding further edits, but you might lose some functionality. By default, html looks good and is accessible, so that will be our default throughout this book.</p></li>
<li><p>You can choose to knit to PDF, however, unless you’re using the server this requires a <strong><a href="https://psyteachr.github.io/glossary/l#latex" target="_blank" class="glossary" title="A typesetting program needed to create PDF files from R Markdown documents.">LaTeX</a></strong> installation and can be quite complicated. If you do not already know what LaTeX is and how to use it, we do not recommend knitting to PDF. If you do know how to use LaTeX, you probably do not need us to give you instructions!</p></li>
</ul>
<p>We will test some of these warnings in error mode in the test yourself section, but we have one final demonstration for how R Markdown files can be reproducible.</p>
</section></section><section id="demonstrating-reproducibility" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="demonstrating-reproducibility">
<span class="header-section-number">2.3</span> Demonstrating reproducibility</h2>
</section><section id="finished" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="finished">
<span class="header-section-number">2.4</span> Finished</h2>
<p>And you’re done! On your very first time using R you’ve not only written functioning code but you’ve written a reproducible output! You could send someone else your R Markdown document and they would be able to produce exactly the same HTML document as you, just by pressing knit.</p>
<p>The key thing we want you to take away from this chapter is that the data skills that you are going to learn can be broken down into manageable chunks and that is how we are going to teach you to help you learn them. The skills might be very new to a lot of you, but we’re going to take you through it step-by-step. You’ll be amazed at how quickly you can start producing professional-looking data visualisations and analysis.</p>
<p>If you have any questions about anything contained in this chapter or in Programming Basics, please remember to ask us!</p>
</section><section id="test-yourself" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="test-yourself">
<span class="header-section-number">2.5</span> Test Yourself</h2>
<ol type="1">
<li>One of the key first steps when we open RStudio is to:
<div id="radio_WGFBNIXFNZ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WGFBNIXFNZ" value="answer"><span>set your working directory</span></label><label><input type="radio" autocomplete="off" name="radio_WGFBNIXFNZ" value=""><span>put on some top tunes as we will be here a while</span></label><label><input type="radio" autocomplete="off" name="radio_WGFBNIXFNZ" value=""><span>build some folders</span></label><label><input type="radio" autocomplete="off" name="radio_WGFBNIXFNZ" value=""><span>make a coffee</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain This Answers
</button>
<div class="cell" data-layout-align="center">
<p>One of the most common issues we see is that code doesn’t work first time because people have forgotten to set the working directory. The working directory is the file you want to save any files to, or any output, or contains your data. Code needs to know where the data is so we set the working directory as the first step when we open RStudio</p>
</div>
</div>
<p><br></p>
<ol start="2" type="1">
<li><p>When using the default environment color settings for RStudio what color would the background of a code chunk be in R Markdown? <select class="webex-select"><option value="blank"></option>
<option value="">white</option>
<option value="">red</option>
<option value="">green</option>
<option value="answer">grey</option></select></p></li>
<li><p>When using the default environment color settings for RStudio what color would the background of normal text be in R Markdown? <select class="webex-select"><option value="blank"></option>
<option value="answer">white</option>
<option value="">red</option>
<option value="">green</option>
<option value="">grey</option></select></p></li>
</ol>
<div class="webex-solution">
<button>
Explain These Answers
</button>
<div class="cell" data-layout-align="center">
<p>Assuming you haven’t changed any of the settings in RStudio, code chunks will tend to have a grey background and normal text will tend to have a white background. This is a good way to check that you have closed and opened code chunks correctly.</p>
</div>
</div>
<p><br></p>
<ol start="4" type="1">
<li>Code chunks are started with:
<div id="radio_IKTRGFCMMU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IKTRGFCMMU" value=""><span>three single quotes</span></label><label><input type="radio" autocomplete="off" name="radio_IKTRGFCMMU" value="answer"><span>three backticks</span></label><label><input type="radio" autocomplete="off" name="radio_IKTRGFCMMU" value=""><span>three double quotes</span></label><label><input type="radio" autocomplete="off" name="radio_IKTRGFCMMU" value=""><span>three single clefs</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain This Answers
</button>
<div class="cell" data-layout-align="center">
<p>Code chunks always take the same general format of three backticks followed by curly parentheses and a lower case r inside the parentheses. Often people mistake these backticks for single quotes but that won’t work. If you have set your code chunk correctly, using backticks, the background color will change!</p>
</div>
</div>
<p><br></p>
<ol start="5" type="1">
<li>Inline coding is:
<div id="radio_RRLMFQVNXF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RRLMFQVNXF" value=""><span>where you nicely organise your code in a line</span></label><label><input type="radio" autocomplete="off" name="radio_RRLMFQVNXF" value=""><span>where you make sure all the code is nicely indented from the side</span></label><label><input type="radio" autocomplete="off" name="radio_RRLMFQVNXF" value=""><span>an exuberant way of exclaiming you have written good code!</span></label><label><input type="radio" autocomplete="off" name="radio_RRLMFQVNXF" value="answer"><span>an approach of intergrating code and text in a sentence outside of a code chunk</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain This Answers
</button>
<div class="cell" data-layout-align="center">
<p>Inline coding is an incredibly useful approach for merging text and code in a sentence outside of a code chunk. It can be really useful for when you want to add values from your code directly into your text. Copying and pasting can create errors easily so better to code it when you can!</p>
</div>
</div>
</section><section id="getting-ready-to-work-with-data" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="getting-ready-to-work-with-data">
<span class="header-section-number">2.6</span> Getting ready to work with data</h2>
<p>In this chapter you will learn how to load the <strong><a href="https://psyteachr.github.io/glossary/p#package" target="_blank" class="glossary" title="A group of R functions.">packages</a></strong> required to work with the data. You’ll then load the data into RStudio before getting it organised into a format (or structure) that helps us answer our research question. And a top tip to remember is to always think back to what we have done before - for instance, if you can’t remember what packages are, go back and revise the <a href="programming-basics.html" target="_blank">Programming Basics</a>.</p>
<p>Before we begin working with the data we need to do some set-up and get the data into our working directory.</p>
<section id="ld-a1" class="level3" data-number="2.6.1"><h3 data-number="2.6.1" class="anchored" data-anchor-id="ld-a1">
<span class="header-section-number">2.6.1</span> Activity 1: Set-up the data, working directory and Rmd file</h3>
<ul>
<li>Download <a href="ahi-cesd.csv" download=""><code>ahi-cesd.csv</code></a> and <a href="participant-info.csv"><code>participant-info.csv</code></a> into the folder on your computer you want to use for this chapter!
<ul>
<li>To download a file from this book, right click the link and select “save link as”. Make sure that both files are saved as “.csv”. Do not open them on your machine as often other software like Excel can change setting and ruin the files and cause you problems. We will look at the data once we load it into R and RStudio.</li>
<li>If you are working on the server, you will need to upload the files to the server as well.</li>
</ul>
</li>
<li>Next, open RStudio and ensure the environment is clear.
<ul>
<li>If you’re on the server, avoid a number of issues by restarting the session - click <code>Session</code> - <code>Restart R</code>
</li>
</ul>
</li>
<li>Set the working directory to your chapter folder. You might want to refer to <a href="#intro-a2" target="_blank">Activity 2 in Chapter 2</a> if you are unsure about this step.</li>
<li>Now open a new R Markdown document (.Rmd file) and save it in your working directory. Call the file “LoadingData”. You can refer to <a href="#intro-a3" target="_blank">Activity 3 in Chapter 2</a>
<ul>
<li>
<strong>Note:</strong> Your R Markdown file (<code>LoadingData.Rmd</code>) must be in the same folder as the datafiles or the code we are going to write will not work.</li>
</ul>
</li>
<li>Finally, delete the default R Markdown text and insert a new code chunk. Remember to only delete the text and code that comes below/after line 7.</li>
</ul>
<p>We are now ready to begin working with the data. A <strong>top tip</strong> is to use the white space to take any notes that might help you for each activity and to make reminders to yourself about what things do!</p>
</section><section id="ld-a2" class="level3" data-number="2.6.2"><h3 data-number="2.6.2" class="anchored" data-anchor-id="ld-a2">
<span class="header-section-number">2.6.2</span> Activity 2: Loading a package to our library</h3>
<p>Today we need to use the <strong><a href="https://psyteachr.github.io/glossary/t#tidyverse" target="_blank" class="glossary" title="A set of R packages that help you create and work with tidy data">tidyverse</a></strong> package. You will use this package in almost every single chapter of this course as the functions it contains are those we use for <strong><a href="https://psyteachr.github.io/glossary/d#data-wrangling" target="_blank" class="glossary" title="The process of preparing data for visualisation and statistical analysis.">data wrangling</a></strong>, <strong><a href="https://psyteachr.github.io/glossary/d#descriptive" target="_blank" class="glossary" title="Statistics that describe an aspect of data (e.g., mean, median, mode, variance, range)">descriptive</a></strong> statistics, and visualisation. So let’s load that package into our library using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function.</p>
<ul>
<li>To load the <code>tidyverse</code> type the following code into your code chunk and then run it.</li>
<li>Remember that sometimes in the <strong><a href="https://psyteachr.github.io/glossary/c#console" target="_blank" class="glossary" title="The pane in RStudio where you can type in commands and view output messages.">console window</a></strong> you will see information about the package you have loaded, but sometimes you won’t. You should however see the line of code you have just run repeated in the console window. If you see any red text, be sure to read it as it might be a warning, an error or a message.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="the-data" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="the-data">
<span class="header-section-number">2.7</span> The data</h2>
<p>For this chapter, we use real data from <span class="citation" data-cites="woodworth_data_2018">Woodworth et al. (<a href="references.html#ref-woodworth_data_2018" role="doc-biblioref">2018</a>)</span> ‘<a href="https://openpsychologydata.metajnl.com/articles/10.5334/jopd.35" target="_blank">Web-based Positive Psychology Interventions: A Reexamination of Effectiveness</a>’. It would be useful to read the abstract to give you a sense of what the paper is about and what the data might look like, but in summary, the files contain data from two scales as well as demographic information about participants. The two scales are:</p>
<ul>
<li><p>The Authentic Happiness Inventory (AHI).</p></li>
<li><p>The Center for Epidemiological Studies Depression (CES-D) scale.</p></li>
</ul>
<section id="ld-a3" class="level3" data-number="2.7.1"><h3 data-number="2.7.1" class="anchored" data-anchor-id="ld-a3">
<span class="header-section-number">2.7.1</span> Activity 3: Read in data</h3>
<p>Now that we have our data in our folder we need to read in the data - “read” in this sense just means to bring the data into RStudio and store it in an <strong><a href="https://psyteachr.github.io/glossary/o#object" target="_blank" class="glossary" title="A word that identifies and stores the value of some data for later use.">object</a></strong> so we can work with it. To do this we will use the function <code>read_csv()</code> that allows us to read in <strong><a href="https://psyteachr.github.io/glossary/c#csv" target="_blank" class="glossary" title="Comma-separated variable: a file type for representing data where each variable is separated from the next by a comma.">.csv files</a></strong>. There are also functions that allow you to read in Excel files (e.g.&nbsp;.xlsx) and other formats, however in this course we will only use .csv files as they are not software specific and therefore are better for when looking to practice open science! A .csv file can be read by any basic text editor on nearly all machines.</p>
<ul>
<li>The code chunk below reads in both datafiles. Type it into your code chunk and run them. Let’s look at what they do.</li>
<li>First, we create an object called <code>dat</code> that contains the data in the <code>ahi-cesd.csv</code> file.</li>
<li>Next we then create an object called <code>info</code> that contains the data in the <code>participant-info.csv</code>.</li>
<li>Note how both lines have the same format of <code>object &lt;- function("datafile_name.csv")</code>
<ul>
<li>it is imperative that you have the double quotation marks around the datafile name and that the datafile name is spelt correctly and includes the .csv part.</li>
<li>and remember that <code>&lt;-</code> is called the <strong><a href="https://psyteachr.github.io/glossary/a#assignment-operator" target="_blank" class="glossary" title="The symbol <-, which functions like = and assigns the value on the right to the object on the left">assignment operator</a></strong> but we can read it as “assigned to”. For example, the first line can be read as the data in <code>ahi-cesd.csv</code> is assigned to the object called <code>dat</code>.</li>
</ul>
</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ahi-cesd.csv"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/participant-info.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you have done this activity correctly, and the preceding activities, you should now see that the objects <code>dat</code> and <code>pinfo</code> have appeared in the <strong><a href="https://psyteachr.github.io/glossary/e#environment" target="_blank" class="glossary" title="A data structure that contains R objects such as variables and functions">environment</a></strong> pane. If they are not there then you should check the spelling of the filenames and the structure of the code lines as well as maybe the working directory.</p>
<div class="cell" data-layout-align="center" type="danger">
<div class="danger">
<p>
WATCH OUT! There is also a function called <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>. Be very careful NOT to use this function instead of <code>read_csv()</code> as they have different ways of naming columns. For the activities and the assignments we will always ask and expect you to use <code>read_csv()</code>. This is really a reminder to watch spelling on functions and to be careful to use the right functions.
</p>
</div>
</div>
</section></section><section id="looking-at-data" class="level2" data-number="2.8"><h2 data-number="2.8" class="anchored" data-anchor-id="looking-at-data">
<span class="header-section-number">2.8</span> Looking at Data</h2>
<p>Great! Now that we have our data read in the first step you should always do is to have an initial check to see what your data looks like. Normally you will have an idea already from the experiment you ran but if you are using someones data you might not, so best to check it out. There are several ways you can look at your data and these are listed in Activity 4 below. Try them all to see how the results differ.</p>
<section id="ld-a4" class="level3" data-number="2.8.1"><h3 data-number="2.8.1" class="anchored" data-anchor-id="ld-a4">
<span class="header-section-number">2.8.1</span> Activity 4: Look at your data</h3>
<ul>
<li>
<strong>Option 1:</strong> In the environment pane, click on the name of the object you want to look at. For example, click the names <code>dat</code> and <code>pinfo</code>. This will open the data to give you a spreadsheet-like view (although you can’t edit it like in Excel)<br>
</li>
<li>
<strong>Option 2:</strong> In the environment pane, click the small blue play button to the left of <code>dat</code> and <code>pinfo</code>. This will show you the structure of the object information including the names of all the variables in that object and what type they are (also see <code>str(pinfo)</code>)</li>
<li>
<strong>Option 3:</strong> In the console window, type and run <code>str(pinfo)</code> and then <code>str(dat)</code>
</li>
<li>
<strong>Option 4:</strong> Repeat option 3 but this time use the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function - e.g.&nbsp;<code>summary(dat)</code>
</li>
<li>
<strong>Option 5:</strong> Repeat option 3 but this time use the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function</li>
<li>
<strong>Option 6:</strong> Type the name of the object you want to view in the console window and run it, e.g., type <code>dat</code> in the console window and run it.</li>
</ul>
<p>As you can see there are various different ways to get an idea of what your data looks like. Each tells you similar but also different info. We will explore more as we get further into the book but for now just be aware that you can use all of these approaches to see your data. More often than not Option 1 and Option 2 give you the info you need, the quickest.</p>
</section></section><section id="joining-data" class="level2" data-number="2.9"><h2 data-number="2.9" class="anchored" data-anchor-id="joining-data">
<span class="header-section-number">2.9</span> Joining Data</h2>
<p>So far so awesome! We have our data and we know what it looks like, so let’s start trying to do things with our data! The first thing we will do is combine datafiles! We have two files, <code>dat</code> and <code>info</code> but what we really want is a single file that has both the data and the demographic information about the participants as it makes it easier to work with the data when it is all combined together. To do this we are going to use the function <code>inner_join()</code> which comes from the <code>dplyr</code> package - one of the packages loaded in as part of the <code>tidyverse</code>. But don’t worry to much about deliberately trying to remember all the different packages and functions as it will come naturally with the practice we give you.</p>
<ul>
<li>
<strong>Top tip:</strong> Remember to use the help function <code>?inner_join</code> if you want more information about how to use a function and to use tab auto-complete to help you write your code.</li>
</ul>
<section id="ld-a5" class="level3" data-number="2.9.1"><h3 data-number="2.9.1" class="anchored" data-anchor-id="ld-a5">
<span class="header-section-number">2.9.1</span> Activity 5: Join the files together</h3>
<p>The below code will create a new object, called <code>all_dat</code>, that combines the data from both <code>dat</code> and <code>pinfo</code> using the information in the columns <code>id</code> and <code>intervention</code> to match the participants’ data across the two sets of data. This is going to be an <strong><a href="https://psyteachr.github.io/glossary/i#inner-join" target="_blank" class="glossary" title="A mutating join that returns all the rows that have a match in the other table.">inner join approach</a></strong> - data will only be kept for a participant if they exist in both datafiles. There are lots of different joins but we will see them as we go further into the book.</p>
<ul>
<li>Type and run the below code in a new code chunk to inner join the two sets of data.</li>
<li>Let’s see if we can make sense of what is happening
<ul>
<li>
<code>all_dat</code> is the new object that has the data combined</li>
<li>
<code>x</code> is the first argument and it should be the first data/object you want to combine</li>
<li>
<code>y</code> is the second argument and it should be the second data/object you want to combine</li>
<li>
<code>by</code> is the third argument and it lists the names of the columns you want to combine the data by. It uses an additional function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> to say that there is more than one column to combine by.</li>
</ul>
</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>all_dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> dat, </span>
<span id="cb5-2"><a href="#cb5-2"></a>                      <span class="at">y =</span> pinfo, </span>
<span id="cb5-3"><a href="#cb5-3"></a>                      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"intervention"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you have run this code you should now see the <code>all_dat</code> in the environment pane. View the new dataset using one of the methods from Activity 4. In fact, try to remember that you should always view any new object or data that you create. Code often can run but that doesn’t necessarily mean it is correct. The programme only ever knows what the code says not what you thought you said. Get into the habit of always checking output!</p>
</section></section><section id="selecting-data" class="level2" data-number="2.10"><h2 data-number="2.10" class="anchored" data-anchor-id="selecting-data">
<span class="header-section-number">2.10</span> Selecting Data</h2>
<p>Excellent! We have now combined our data into one big object! However, Very frequently, datasets will have more variables, information, and data than you actually want to use and it can make life easier to create a new object with just the data you need. So, our final step today is to select just some variables of interest! In our case, the <code>all_dat</code> contains the responses to each individual question on both the AHI scale and the CESD scale, as well as the total score (i.e., the sum of all the individual responses). Let’s say for our analysis all we care about is the total scores and the demographic information about participants. We are going to use a new function called the <code>select()</code> function, again from the <code>dplyr</code> package, to select only the columns we are interested in and store them in (i.e.&nbsp;assign them to) a new object called <code>summarydata</code></p>
<section id="ld-a6" class="level3" data-number="2.10.1"><h3 data-number="2.10.1" class="anchored" data-anchor-id="ld-a6">
<span class="header-section-number">2.10.1</span> Activity 6: Pull out variables of interest</h3>
<ul>
<li>Type and run the below code in a new code chunk. Let’s also have a quick look at the code.
<ul>
<li>summarydata is the new object we are creating using the <code>select()</code> function</li>
<li>
<code>.data</code> is the first argument and it wants to know what object are we going to select columns from. In this instance <code>all_dat</code>.</li>
<li>next we have a list of columns that we want to keep. Every column must be spelt correctly and must exist in the object you are selecting it from. Makes sense really; otherwise the function wouldn’t know what you wanted!</li>
</ul>
</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>summarydata <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="at">.data =</span> all_dat, </span>
<span id="cb6-2"><a href="#cb6-2"></a>                      ahiTotal, </span>
<span id="cb6-3"><a href="#cb6-3"></a>                      cesdTotal, </span>
<span id="cb6-4"><a href="#cb6-4"></a>                      sex, </span>
<span id="cb6-5"><a href="#cb6-5"></a>                      age, </span>
<span id="cb6-6"><a href="#cb6-6"></a>                      educ, </span>
<span id="cb6-7"><a href="#cb6-7"></a>                      income, </span>
<span id="cb6-8"><a href="#cb6-8"></a>                      occasion,</span>
<span id="cb6-9"><a href="#cb6-9"></a>                      elapsed.days)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If that has worked correctly you should see <code>summarydata</code> in the environment pane and can run <code>head(summarydata)</code> now in the console window to get a view of the output. If you see any red text in the console window it would be worth checking the spelling of the objects and columns you wanted to select. If everything has gone to plan the output should look something like this:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 15%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 20%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">ahiTotal</th>
<th style="text-align: center;">cesdTotal</th>
<th style="text-align: center;">sex</th>
<th style="text-align: center;">age</th>
<th style="text-align: center;">educ</th>
<th style="text-align: center;">income</th>
<th style="text-align: center;">occasion</th>
<th style="text-align: center;">elapsed.days</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">32</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">46</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">182.03</td>
</tr>
<tr class="even">
<td style="text-align: center;">34</td>
<td style="text-align: center;">49</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">37</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">14.19</td>
</tr>
<tr class="odd">
<td style="text-align: center;">34</td>
<td style="text-align: center;">47</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">37</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">33.03</td>
</tr>
<tr class="even">
<td style="text-align: center;">35</td>
<td style="text-align: center;">41</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">19</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: center;">36</td>
<td style="text-align: center;">36</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">202.10</td>
</tr>
<tr class="even">
<td style="text-align: center;">37</td>
<td style="text-align: center;">35</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">49</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="knitting-our-reproducible-code" class="level2" data-number="2.11"><h2 data-number="2.11" class="anchored" data-anchor-id="knitting-our-reproducible-code">
<span class="header-section-number">2.11</span> Knitting our Reproducible code</h2>
<p>As we saw in <a href="##intro-a8-a3" target="_blank">Activity 8 in Chapter 2</a> our final step to making a reproducible document is to knit it to HTML! Try knitting your file to HTML now! If all the code is working correctly then you should get an html document showing all your code! If you don’t get the output there could be a few issues either relating to your code or to your installation. You can use the below debugging tips to ask yourself some questions about your code. If all the code looks correct be sure to speak to one of the TEAM to see what might be wrong.</p>
<section id="ld-debug" class="level3" data-number="2.11.1"><h3 data-number="2.11.1" class="anchored" data-anchor-id="ld-debug">
<span class="header-section-number">2.11.1</span> Debugging tips</h3>
<ul>
<li>When you downloaded the files did you save the file names <strong>exactly</strong> as they were originally? If you download the file more than once you will find your computer may automatically add a number to the end of the file name. <code>data.csv</code> is not the same as <code>data(1).csv</code>. Pay close attention to names!</li>
<li>Have you used the <strong>exact</strong> same object names as we did in each activity? Remember, <code>name</code> is different to <code>Name</code>. In order to make sure you can follow along with this book, pay special attention to ensuring you use the same object names as we do.<br>
</li>
<li>Have you used quotation marks where needed?<br>
</li>
<li>Have you accidentally deleted any back ticks (```) from the beginning or end of code chunks?</li>
</ul></section></section><section id="code-layout" class="level2" data-number="2.12"><h2 data-number="2.12" class="anchored" data-anchor-id="code-layout">
<span class="header-section-number">2.12</span> Code Layout</h2>
<p>And one very quick point before we end for the day. You may have noticed we wrote code as such:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>all_dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> dat, </span>
<span id="cb7-2"><a href="#cb7-2"></a>                      <span class="at">y =</span> pinfo, </span>
<span id="cb7-3"><a href="#cb7-3"></a>                      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"intervention"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But we could also have written it as:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>all_dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> dat, <span class="at">y =</span> pinfo, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"intervention"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Both do exactly the same! In a code chunk you can take a new line after a comma (,) and the code nicely idents for you. It can make it easier to read and to debug if the code is nicely presented but it isn’t essential!</p>
</section><section id="ld-fin" class="level2" data-number="2.13"><h2 data-number="2.13" class="anchored" data-anchor-id="ld-fin">
<span class="header-section-number">2.13</span> Finished!</h2>
<p>And that’s it, well done! Remember to save your work in your chapter folder and make a note of any mistakes you made and how you fixed them. You have started on your journey to become a confident and competent member of the open scientific community!</p>
<p>Now would be a good time to get comfortable with what we’ve covered already and revise the activities and support materials presented so far if needed. If you’re feeling comfortable with you can work your way through this book at your own pace or push yourself by using the additional resources highlighted in Programming Basics. And don’t forget to try out the tasks below to check your understanding and knowledge of the skills you are learning!</p>
<p>Finally, if you’re using the R server, we strongly recommend that you download a copy of any files you have been working on and save them on your machine so that you have a local back-up.</p>
</section><section id="ld-test" class="level2" data-number="2.14"><h2 data-number="2.14" class="anchored" data-anchor-id="ld-test">
<span class="header-section-number">2.14</span> Test yourself</h2>
<section id="knowledge-questions" class="level3" data-number="2.14.1"><h3 data-number="2.14.1" class="anchored" data-anchor-id="knowledge-questions">
<span class="header-section-number">2.14.1</span> Knowledge Questions</h3>
<ol type="1">
<li>When loading in a .csv file, which function should you use?
<div id="radio_TCFMVQBYVI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TCFMVQBYVI" value="answer"><span>read_csv()</span></label><label><input type="radio" autocomplete="off" name="radio_TCFMVQBYVI" value=""><span>read.csv()</span></label><label><input type="radio" autocomplete="off" name="radio_TCFMVQBYVI" value=""><span>select()</span></label><label><input type="radio" autocomplete="off" name="radio_TCFMVQBYVI" value=""><span>library()</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain this answer
</button>
<div class="cell" data-layout-align="center">
<p>Remember, in this course we use <code>read_csv()</code> and it is important that you use this function otherwise you may find that the data does not work as expected.</p>
</div>
</div>
<ol start="2" type="1">
<li>The function <code>inner_join()</code> takes the arguments <code>x</code>, <code>y</code>, <code>by</code>. What does <code>by</code> do?
<div id="radio_RHALCDKOLU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RHALCDKOLU" value=""><span>Specifies the first object to join</span></label><label><input type="radio" autocomplete="off" name="radio_RHALCDKOLU" value=""><span>Specifies the second object to join</span></label><label><input type="radio" autocomplete="off" name="radio_RHALCDKOLU" value="answer"><span>Specifies the column to join by that both objects have in common</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain this answer
</button>
<div class="cell" data-layout-align="center">
<p>Remember, functions have arguments and the arguments all do something slightly different. In the <code>inner_join()</code> the <code>by</code> argument says which columns to join by. If you want to join by more than one column you need to put both columns inside the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function.</p>
</div>
</div>
<ol start="3" type="1">
<li>What does the function <code>select()</code> do?
<div id="radio_ICICNWRVXZ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ICICNWRVXZ" value=""><span>Keeps only the observations you specify</span></label><label><input type="radio" autocomplete="off" name="radio_ICICNWRVXZ" value="answer"><span>Keeps only the columns you specify</span></label><label><input type="radio" autocomplete="off" name="radio_ICICNWRVXZ" value=""><span>Keeps only the objects you specify</span></label>
</div>
</li>
</ol>
<div class="webex-solution">
<button>
Explain this answer
</button>
<div class="cell" data-layout-align="center">
<p>The <code>select()</code> function comes from one of the tidyverse packages - dplyr to be precise. It is the main function we use to keep and remove columns we want or don’t want. You will start to remember functions you need as you work more with them. Remember the best approach is to think back to what you did!</p>
</div>
</div>
</section><section id="ld-debugex" class="level3" data-number="2.14.2"><h3 data-number="2.14.2" class="anchored" data-anchor-id="ld-debugex">
<span class="header-section-number">2.14.2</span> Debugging exercises</h3>
<p>One key skill is learning how to fix errors in your code. These exercises below are specifically design to create errors. Ruun each exercise and try to solve the errors yourself before moving on to the next one. Make a note of what the error message was and how you solved it - you might find it helpful to create a new file just for error solving notes. You will find that you often make the same errors in over and over again when running analyses; experts also make tonnes of errors. The difference between a novice and an expert is that when you are first learning, an error might slow you down, but you will greatly speed you up with practice. Don’t be put off by errors!</p>
<ol type="1">
<li>Restart the R session (<strong><code>Session &gt;&gt; Restart R</code></strong>). Make sure that the working directory is set to the right folder and then run the below code:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"ahi-cesd.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will produce the error:</p>
<pre><code>`could not find function "read_csv"`</code></pre>
<p>Once you figure out how to fix this error, make a note of it.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<p>When you restarted the session you unloaded all the packages you previously had loaded - i.e.&nbsp;the <code>tidyverse</code>. The function <code>read_csv()</code> is part of the <code>tidyverse</code> package which means that in order for the code to run you need to run <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code> to reload the package so that you can use the function. Remember that we always need to load packages into our library but we only install them once. Again, think about apps on your phone!</p>
</div>
</div>
<ol start="2" type="1">
<li>Restart the R session (<strong><code>Session &gt;&gt; Restart R</code></strong>). Make sure that the working directory is set to the right folder and then run the below code:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-2"><a href="#cb11-2"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"ahi-cesd"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will produce the error:</p>
<pre><code>`Error: 'ahi-cesd' does not exist in current working directory`.</code></pre>
<p>Once you figure out how to fix this error, make a note of it.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<p>When loading data you need to provide the full file name including the file extension. In this case the error was caused by writing <code>ahi-cesd</code> instead of <code>ahi-cesd.csv</code>. As far as coding goes, these are two completely different files and only one of them exists in the working directory.</p>
</div>
</div>
<ol start="3" type="1">
<li>Restart the R session (<strong><code>Session &gt;&gt; Restart R</code></strong>). Make sure that the working directory is set to the right folder and then run the below code:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="#cb13-2"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span> (<span class="st">"ahi-cesd.csv"</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>pinfo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"participant-info.csv"</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a>all_dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> dat, </span>
<span id="cb13-5"><a href="#cb13-5"></a>                      <span class="at">y =</span> pinfo, </span>
<span id="cb13-6"><a href="#cb13-6"></a>                      <span class="at">by =</span> <span class="st">"id"</span>, <span class="st">"intervention"</span>) </span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="fu">summary</span>(all_dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at the summary for <code>all_dat</code>. You will see that R has duplicated the <code>intervention</code> variable, so that there is now an <code>intervention.x</code> and an <code>intervention.y</code> that contain the same data. Once you figure out how to fix this error, make a note of it.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<p>If you want to join two objects that have mulitple columns in common you need to use the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> command to list all of the columns. The code above hasn’t done this, it’s just listed <code>id</code> and <code>intervention</code> without enclosing them with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> so it defaults to using just the first one and ignores the other column. When it does this both objects had an <code>intervention</code> column so it keeps both. The rule is, when joining objects, join them by all common columns!.</p>
</div>
</div>
</section></section><section id="words-from-this-chapter" class="level2" data-number="2.15"><h2 data-number="2.15" class="anchored" data-anchor-id="words-from-this-chapter">
<span class="header-section-number">2.15</span> Words from this Chapter</h2>
<p>Below you will find a list of words that were used in this chapter that might be new to you in case it helps to have somewhere to refer back to what they mean. The links in this table take you to the entry for the words in the <a href="https://psyteachr.github.io/glossary/" target="_blank">PsyTeachR Glossary</a>. Note that the Glossary is written by numerous members of the team and as such may use slightly different terminology from that shown in the chapter.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/a#assignment-operator" class="glossary" target="_blank">assignment-operator</a></td>
<td style="text-align: left;">The symbol &lt;-, which functions like = and assigns the value on the right to the object on the left</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#chunk" class="glossary" target="_blank">chunk</a></td>
<td style="text-align: left;">A section of code in an R Markdown file</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#console" class="glossary" target="_blank">console</a></td>
<td style="text-align: left;">The pane in RStudio where you can type in commands and view output messages.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#csv" class="glossary" target="_blank">csv</a></td>
<td style="text-align: left;">Comma-separated variable: a file type for representing data where each variable is separated from the next by a comma.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#data-wrangling" class="glossary" target="_blank">data-wrangling</a></td>
<td style="text-align: left;">The process of preparing data for visualisation and statistical analysis.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#descriptive" class="glossary" target="_blank">descriptive</a></td>
<td style="text-align: left;">Statistics that describe an aspect of data (e.g., mean, median, mode, variance, range)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/e#environment" class="glossary" target="_blank">environment</a></td>
<td style="text-align: left;">A data structure that contains R objects such as variables and functions</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/h#html" class="glossary" target="_blank">html</a></td>
<td style="text-align: left;">Hyper-Text Markup Language: A system for semantically tagging structure and information on web pages.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/i#inline-code" class="glossary" target="_blank">inline-code</a></td>
<td style="text-align: left;">Directly inserting the result of code into the text of a .Rmd file.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/i#inner-join" class="glossary" target="_blank">inner-join</a></td>
<td style="text-align: left;">A mutating join that returns all the rows that have a match in the other table.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/k#knit" class="glossary" target="_blank">knit</a></td>
<td style="text-align: left;">To create an HTML, PDF, or Word document from an R Markdown (Rmd) document</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/l#latex" class="glossary" target="_blank">latex</a></td>
<td style="text-align: left;">A typesetting program needed to create PDF files from R Markdown documents.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/o#object" class="glossary" target="_blank">object</a></td>
<td style="text-align: left;">A word that identifies and stores the value of some data for later use.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/p#package" class="glossary" target="_blank">package</a></td>
<td style="text-align: left;">A group of R functions.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/r#r-markdown" class="glossary" target="_blank">r-markdown</a></td>
<td style="text-align: left;">The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/r#r-project" class="glossary" target="_blank">r-project</a></td>
<td style="text-align: left;">A project is simply a working directory designated with a .RProj file. When you open an R project, it automatically sets the working directory to the folder the project is located in.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/r#reproducible-research" class="glossary" target="_blank">reproducible-research</a></td>
<td style="text-align: left;">Research that documents all of the steps between raw data and results in a way that can be verified.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/t#tidyverse" class="glossary" target="_blank">tidyverse</a></td>
<td style="text-align: left;">A set of R packages that help you create and work with tidy data</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/w#working-directory" class="glossary" target="_blank">working-directory</a></td>
<td style="text-align: left;">The filepath where R is currently loading files from and saving files to.</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>End of Chapter</strong></p>
<p>That is end of this chapter. Be sure to look again at anything you were unsure about and make some notes to help develop your own knowledge and skills. It would be good to write yourself some questions about what you are unsure of and see if you can answer them later or speak to someone about them. Good work today!</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="list" style="display: none">
<div id="ref-woodworth_data_2018" class="csl-entry" role="listitem">
Woodworth, R. J., O’Brien-Malone, A., Diamond, M. R., &amp; Schüz, B. (2018). Data from, <span>“<span>Web</span>-based <span>Positive</span> <span>Psychology</span> <span>Interventions</span>: <span>A</span> <span>Reexamination</span> of <span>Effectiveness</span>.”</span> <em>Journal of Open Psychology Data</em>, <em>6</em>(1), 1. <a href="https://doi.org/10.5334/jopd.35">https://doi.org/10.5334/jopd.35</a>
</div>
</div>
</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./01-programming-basics.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to programming with R/R Studio</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-intro-data-viz.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Data Visualisation</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">CC-BY (2024) James Bartlett &amp; Wil Toivo</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>